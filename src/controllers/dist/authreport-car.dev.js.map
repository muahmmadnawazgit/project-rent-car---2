{"version":3,"sources":["authreport-car.js"],"names":["con","require","nodemailer","exports","home","req","res","body","email","subject","textarea","query","err","result","length","flash","redirect","sendEmail","mail","createTransport","host","port","secure","requireTLS","auth","user","pass","mailOptions","from","to","text","sendMail","info"],"mappings":";;AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,UAAD,CAAjB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAA1B,C,CACA;;;AAGAE,OAAO,CAACC,IAAR,GAAe,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,kBAKrBD,GAAG,CAACE,IALiB;AAAA,MAErBC,KAFqB,aAErBA,KAFqB;AAAA,MAGrBC,OAHqB,aAGrBA,OAHqB;AAAA,MAIrBC,QAJqB,aAIrBA,QAJqB;AAMzBV,EAAAA,GAAG,CAACW,KAAJ,CAAU,mCAAV,EAA+C,CAACH,KAAD,CAA/C,EAAwD,UAAUI,GAAV,EAAeC,MAAf,EAAuB;AAC3E,QAAID,GAAJ,EAAS,MAAMA,GAAN;;AACT,QAAIC,MAAM,CAACC,MAAP,IAAiB,CAArB,EAAwB;AACpBT,MAAAA,GAAG,CAACU,KAAJ,CAAU,SAAV,EAAqB,2CAArB;AACA,aAAOT,GAAG,CAACU,QAAJ,CAAa,UAAb,CAAP;AACH,KAHD,MAGO;AAAA,UAEMC,SAFN,GAEH,SAASA,SAAT,CAAmBT,KAAnB,EAA0BC,OAA1B,EAAmCC,QAAnC,EAA6C;AACzC,YAAIQ,IAAI,GAAGhB,UAAU,CAACiB,eAAX,CAA2B;AAClCC,UAAAA,IAAI,EAAE,gBAD4B;AAElCC,UAAAA,IAAI,EAAE,GAF4B;AAGlCC,UAAAA,MAAM,EAAE,KAH0B;AAIlCC,UAAAA,UAAU,EAAE,IAJsB;AAKlCC,UAAAA,IAAI,EAAE;AACFC,YAAAA,IAAI,EAAE,+BADJ;AAEFC,YAAAA,IAAI,EAAE;AAFJ;AAL4B,SAA3B,CAAX;AAUA,YAAIC,WAAW,GAAG;AACdC,UAAAA,IAAI,EAAEpB,KADQ;AAEdqB,UAAAA,EAAE,EAAE,+BAFU;AAGdpB,UAAAA,OAAO,EAAEA,OAHK;AAIdqB,UAAAA,IAAI,EAAEpB;AAJQ,SAAlB;AAMAQ,QAAAA,IAAI,CAACa,QAAL,CAAcJ,WAAd,EAA2B,UAAUf,GAAV,EAAeoB,IAAf,EAAqB;AAC5C,cAAIpB,GAAJ,EAAS,MAAMA,GAAN;AACZ,SAFD;AAIH,OAvBE;;AAwBHK,MAAAA,SAAS,CAACT,KAAD,EAAQC,OAAR,EAAiBC,QAAjB,EAA2B,YAAY;AAC5C,YAAIE,GAAJ,EAAS,MAAMA,GAAN;AACZ,OAFQ,CAAT;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BAP,MAAAA,GAAG,CAACU,KAAJ,CAAU,SAAV,EAAqB,0DAArB;AACA,aAAOT,GAAG,CAACU,QAAJ,CAAa,UAAb,CAAP;AACH;AACJ,GAjED;AAmEH,CAzED","sourcesContent":["var con = require('../db.js');\r\nconst nodemailer = require('nodemailer');\r\n//const mailGun = require('nodemailer-mailgun-transport');\r\n\r\n\r\nexports.home = (req, res) => {\r\n    const {\r\n        email,\r\n        subject,\r\n        textarea\r\n    } = req.body;\r\n    con.query('SELECT * FROM users WHERE email=?', [email], function (err, result) {\r\n        if (err) throw err;\r\n        if (result.length <= 0) {\r\n            req.flash('message', 'Please Enter Email you have register with');\r\n            return res.redirect('/profile');\r\n        } else {\r\n\r\n            function sendEmail(email, subject, textarea) {\r\n                var mail = nodemailer.createTransport({\r\n                    host: 'smtp.gmail.com',\r\n                    port: 587,\r\n                    secure: false,\r\n                    requireTLS: true,\r\n                    auth: {\r\n                        user: 'muhammadnawaz110002@gmail.com',\r\n                        pass: 'fdbtwhlfzoddxczn'\r\n                    }\r\n                })\r\n                var mailOptions = {\r\n                    from: email,\r\n                    to: 'muhammadnawaz110002@gmail.com',\r\n                    subject: subject,\r\n                    text: textarea\r\n                }\r\n                mail.sendMail(mailOptions, function (err, info) {\r\n                    if (err) throw err;\r\n                })\r\n\r\n            }\r\n            sendEmail(email, subject, textarea, function () {\r\n                if (err) throw err\r\n            });\r\n            /*\r\n            const auth = {\r\n                auth: {\r\n                    api_key: 'e787c686c8a4c53464e3facc756488e0-48d7d97c-f8ad20e9',\r\n                    domain: 'sandboxbdbb930070bc42bc9b8ef57f12f666c6.mailgun.org'\r\n                }\r\n            }\r\n\r\n\r\n            const transporter = nodemailer.createTransport(mailGun(auth));\r\n\r\n            const sendMail = (email, subject, textarea, cb) => {\r\n                const mailOptions = {\r\n                    from: email,\r\n                    to: 'muhammadnawaz110002@gmail.com',\r\n                    subject: subject,\r\n                    text: textarea\r\n                };\r\n                transporter.sendMail(mailOptions, function (err, data) {\r\n                    if (err) {\r\n                        cb(err, null)\r\n                    } else {\r\n                        cb(null, data)\r\n                    }\r\n                })\r\n            }\r\n\r\n            sendMail(email, subject, textarea, function (err, data) {\r\n                if (err) throw err;\r\n            })*/\r\n            req.flash('message', 'Email has Been Sent Succefully. We will Contact You Soon');\r\n            return res.redirect('/profile')\r\n        }\r\n    })\r\n\r\n}"],"file":"authreport-car.dev.js"}