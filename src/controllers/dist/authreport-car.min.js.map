{"version":3,"sources":["authreport-car.js"],"names":["con","require","nodemailer","exports","home","req","res","_req$body","subject","email","textarea","err","result","query","flash","length","redirect","mailOptions","sendEmail","port","secure","requireTLS","auth","user","pass","sendMail","info"],"mappings":"aAAA,IAAIA,IAAMC,QAAQ,YACZC,WAAaD,QAAQ,cAI3BE,QAAQC,KAAO,SAACC,EAAKC,GAAQ,IAAAC,EAGrBC,EAAAA,KAHAJ,EAAqBG,EAArBH,MAAqBI,EAAAD,EAAAC,QAErBC,EAFqBF,EAErBE,SAFqBT,IAIrBU,MAJqB,oCAAA,CAAAD,GAAA,SAAAE,EAAAC,GAMrBC,GAAMF,EAAA,MAAAA,EACFA,GAAJC,EAAeD,QAAN,EACLC,OACAP,EAAIS,MAAM,UAAW,6CADdC,EAAPC,SAAoB,YACpB,IAKIC,EARZ,OAQYA,EAAA,CAUIA,KAWER,EAVIA,GADQ,gCAEVD,QASKA,EARAA,KAQSE,GAtB1BR,WAASgB,gBAAiBV,CACXN,KAAAA,iBACDiB,KAAA,IAD4BC,QAAA,EAG1BC,YAH0B,EAIxBC,KAJwB,CAK5BC,KAAA,gCACIC,KAAA,sBAIdC,SAAAR,EAAA,SAAAN,EAAAe,GAMKD,GAASR,EAAAA,MAAaN,IAwClCN,EAAAS,MAAA,UAAA,4DAhELR,EAAAU,SAAA","file":"authreport-car.min.js","sourcesContent":["var con = require('../db.js');\r\nconst nodemailer = require('nodemailer');\r\n//const mailGun = require('nodemailer-mailgun-transport');\r\n\r\n\r\nexports.home = (req, res) => {\r\n    const {\r\n        email,\r\n        subject,\r\n        textarea\r\n    } = req.body;\r\n    con.query('SELECT * FROM users WHERE email=?', [email], function (err, result) {\r\n        if (err) throw err;\r\n        if (result.length <= 0) {\r\n            req.flash('message', 'Please Enter Email you have register with');\r\n            return res.redirect('/profile');\r\n        } else {\r\n\r\n            function sendEmail(email, subject, textarea) {\r\n                var mail = nodemailer.createTransport({\r\n                    host: 'smtp.gmail.com',\r\n                    port: 587,\r\n                    secure: false,\r\n                    requireTLS: true,\r\n                    auth: {\r\n                        user: 'muhammadnawaz110002@gmail.com',\r\n                        pass: 'fdbtwhlfzoddxczn'\r\n                    }\r\n                })\r\n                var mailOptions = {\r\n                    from: email,\r\n                    to: 'muhammadnawaz110002@gmail.com',\r\n                    subject: subject,\r\n                    text: textarea\r\n                }\r\n                mail.sendMail(mailOptions, function (err, info) {\r\n                    if (err) throw err;\r\n                })\r\n\r\n            }\r\n            sendEmail(email, subject, textarea, function () {\r\n                if (err) throw err\r\n            });\r\n            /*\r\n            const auth = {\r\n                auth: {\r\n                    api_key: 'e787c686c8a4c53464e3facc756488e0-48d7d97c-f8ad20e9',\r\n                    domain: 'sandboxbdbb930070bc42bc9b8ef57f12f666c6.mailgun.org'\r\n                }\r\n            }\r\n\r\n\r\n            const transporter = nodemailer.createTransport(mailGun(auth));\r\n\r\n            const sendMail = (email, subject, textarea, cb) => {\r\n                const mailOptions = {\r\n                    from: email,\r\n                    to: 'muhammadnawaz110002@gmail.com',\r\n                    subject: subject,\r\n                    text: textarea\r\n                };\r\n                transporter.sendMail(mailOptions, function (err, data) {\r\n                    if (err) {\r\n                        cb(err, null)\r\n                    } else {\r\n                        cb(null, data)\r\n                    }\r\n                })\r\n            }\r\n\r\n            sendMail(email, subject, textarea, function (err, data) {\r\n                if (err) throw err;\r\n            })*/\r\n            req.flash('message', 'Email has Been Sent Succefully. We will Contact You Soon');\r\n            return res.redirect('/profile')\r\n        }\r\n    })\r\n\r\n}"]}